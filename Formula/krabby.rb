class Krabby < Formula
  desc "Print pokemon sprites in your terminal"
  homepage "https://github.com/yannjor/krabby"
  url "https://github.com/yannjor/krabby/archive/refs/tags/v0.1.8.tar.gz"
  sha256 "346f44b2c38084413da6aeadff5d87f1cc3ab60275653d95921ca6488e3210e3"
  license "GPL-3.0-or-later"

  depends_on "rust" => :build

  def install
    system "cargo", "install", *std_cargo_args
  end

  test do
    assert_match "krabby #{version}", shell_output("#{bin}/krabby --version")

    expected_output = <<~EOS
      Mudkip

      \e[38;2;0;0;0m▄\e[38;2;0;0;0m\e[48;2;140;214;255m▀\e[0m\e[38;2;0;0;0m\e[48;2;82;181;230m▀\e[0m\e[38;2;0;0;0m▄         
     \e[38;2;0;0;0m\e[48;2;0;0;0m▀\e[0m\e[38;2;140;214;255m\e[48;2;140;214;255m▀\e[0m\e[38;2;74;132;206m\e[48;2;74;132;206m▀\e[0m\e[38;2;82;181;230m\e[48;2;82;181;230m▀\e[0m\e[38;2;0;0;0m\e[48;2;0;0;0m▀\e[0m         
    \e[38;2;0;0;0m▄\e[38;2;0;0;0m\e[48;2;74;132;206m▀\e[0m\e[38;2;140;214;255m\e[48;2;74;132;206m▀\e[0m\e[38;2;82;181;230m\e[48;2;82;181;230m▀\e[0m\e[38;2;74;132;206m\e[48;2;74;132;206m▀\e[0m\e[38;2;65;65;65m\e[48;2;65;65;65m▀\e[0m\e[38;2;0;0;0m\e[48;2;82;181;230m▀\e[0m\e[38;2;0;0;0m▄    \e[38;2;0;0;0m▄\e[38;2;0;0;0m▄ 
 \e[38;2;0;0;0m▄\e[38;2;0;0;0m▄\e[38;2;0;0;0m\e[48;2;82;181;230m▀\e[0m\e[38;2;140;214;255m\e[48;2;140;214;255m▀\e[0m\e[38;2;140;214;255m\e[48;2;140;214;255m▀\e[0m\e[38;2;74;132;206m\e[48;2;140;214;255m▀\e[0m\e[38;2;82;181;230m\e[48;2;82;181;230m▀\e[0m\e[38;2;74;132;206m\e[48;2;140;214;255m▀\e[0m\e[38;2;123;197;222m\e[48;2;140;214;255m▀\e[0m\e[38;2;140;214;255m\e[48;2;140;214;255m▀\e[0m\e[38;2;123;197;222m\e[48;2;140;214;255m▀\e[0m\e[38;2;0;0;0m\e[48;2;123;197;222m▀\e[0m\e[38;2;0;0;0m▄\e[38;2;0;0;0m▄\e[38;2;0;0;0m\e[48;2;255;255;255m▀\e[0m\e[38;2;255;255;255m\e[48;2;173;222;239m▀\e[0m\e[38;2;255;255;255m\e[48;2;173;222;239m▀\e[0m\e[38;2;0;0;0m\e[48;2;0;0;0m▀\e[0m
\e[38;2;0;0;0m▀\e[38;2;247;132;49m\e[48;2;0;0;0m▀\e[0m\e[38;2;65;65;65m\e[48;2;206;90;25m▀\e[0m\e[38;2;140;214;255m\e[48;2;140;214;255m▀\e[0m\e[38;2;255;255;255m\e[48;2;0;0;0m▀\e[0m\e[38;2;140;214;255m\e[48;2;140;214;255m▀\e[0m\e[38;2;140;214;255m\e[48;2;140;214;255m▀\e[0m\e[38;2;140;214;255m\e[48;2;140;214;255m▀\e[0m\e[38;2;140;214;255m\e[48;2;255;255;255m▀\e[0m\e[38;2;140;214;255m\e[48;2;140;214;255m▀\e[0m\e[38;2;140;214;255m\e[48;2;82;181;230m▀\e[0m\e[38;2;82;181;230m\e[48;2;247;132;49m▀\e[0m\e[38;2;65;65;65m\e[48;2;206;90;25m▀\e[0m\e[38;2;65;65;65m\e[48;2;65;65;65m▀\e[0m\e[38;2;255;255;255m\e[48;2;173;222;239m▀\e[0m\e[38;2;173;222;239m\e[48;2;123;165;214m▀\e[0m\e[38;2;123;165;214m\e[48;2;173;222;239m▀\e[0m\e[38;2;123;165;214m\e[48;2;173;222;239m▀\e[0m\e[38;2;0;0;0m\e[48;2;0;0;0m▀\e[0m
\e[38;2;0;0;0m▀\e[38;2;247;132;49m\e[48;2;0;0;0m▀\e[0m\e[38;2;206;90;25m\e[48;2;0;0;0m▀\e[0m\e[38;2;82;181;230m\e[48;2;206;90;25m▀\e[0m\e[38;2;140;214;255m\e[48;2;255;255;255m▀\e[0m\e[38;2;140;214;255m\e[48;2;123;197;222m▀\e[0m\e[38;2;140;214;255m\e[48;2;82;181;230m▀\e[0m\e[38;2;140;214;255m\e[48;2;140;214;255m▀\e[0m\e[38;2;0;0;0m\e[48;2;140;214;255m▀\e[0m\e[38;2;140;214;255m\e[48;2;82;181;230m▀\e[0m\e[38;2;247;132;49m\e[48;2;247;132;49m▀\e[0m\e[38;2;247;132;49m\e[48;2;247;132;49m▀\e[0m\e[38;2;247;132;49m\e[48;2;206;90;25m▀\e[0m\e[38;2;247;132;49m\e[48;2;65;65;65m▀\e[0m\e[38;2;65;65;65m\e[48;2;65;65;65m▀\e[0m\e[38;2;173;222;239m\e[48;2;123;165;214m▀\e[0m\e[38;2;123;165;214m\e[48;2;123;165;214m▀\e[0m\e[38;2;123;165;214m\e[48;2;0;0;0m▀\e[0m\e[38;2;0;0;0m▀
   \e[38;2;0;0;0m▀\e[38;2;0;0;0m▀\e[38;2;255;255;255m\e[48;2;0;0;0m▀\e[0m\e[38;2;255;255;255m\e[48;2;65;65;65m▀\e[0m\e[38;2;255;255;255m\e[48;2;74;132;206m▀\e[0m\e[38;2;173;222;239m\e[48;2;74;132;206m▀\e[0m\e[38;2;74;132;206m\e[48;2;82;181;230m▀\e[0m\e[38;2;65;65;65m\e[48;2;74;132;206m▀\e[0m\e[38;2;206;90;25m\e[48;2;65;65;65m▀\e[0m\e[38;2;247;132;49m\e[48;2;65;65;65m▀\e[0m\e[38;2;65;65;65m\e[48;2;82;181;230m▀\e[0m\e[38;2;82;181;230m\e[48;2;82;181;230m▀\e[0m\e[38;2;0;0;0m\e[48;2;0;0;0m▀\e[0m\e[38;2;0;0;0m▀  
     \e[38;2;0;0;0m\e[48;2;0;0;0m▀\e[0m\e[38;2;74;132;206m\e[48;2;123;197;222m▀\e[0m\e[38;2;173;222;239m\e[48;2;82;181;230m▀\e[0m\e[38;2;173;222;239m\e[48;2;0;0;0m▀\e[0m\e[38;2;74;132;206m\e[48;2;65;65;65m▀\e[0m\e[38;2;82;181;230m\e[48;2;82;181;230m▀\e[0m\e[38;2;74;132;206m\e[48;2;82;181;230m▀\e[0m\e[38;2;74;132;206m\e[48;2;65;65;65m▀\e[0m\e[38;2;65;65;65m\e[48;2;0;0;0m▀\e[0m\e[38;2;82;181;230m\e[48;2;0;0;0m▀\e[0m\e[38;2;0;0;0m▀   
      \e[38;2;0;0;0m▀\e[38;2;0;0;0m▀ \e[38;2;0;0;0m▀\e[38;2;123;197;222m\e[48;2;0;0;0m▀\e[0m\e[38;2;123;197;222m\e[48;2;0;0;0m▀\e[0m\e[38;2;0;0;0m▀      
\e[0m
    EOS
    assert_equal expected_output.strip, shell_output("#{bin}/krabby name mudkip").strip
  end
end
